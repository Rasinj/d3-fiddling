<!DOCTYPE html>
<html>

  <style>
    div {
  width: 10px;
  height: 10px;
  margin: 1px 0 0 1px;
  float: ;
  background: #eee;
  display: inline-block;
  background-color: 
      lightblue;
    }
    
    div.one {
      background-color: 
      lightgreen;
    }
    
    div.enter {
      background-color: 
      lightblue;
    }
    
    div.new {
      background-color: 
      purple;
    }
    

</style>
<head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
</body>
  <script>
    
    var data = d3.range(20)
    var body = d3.select("body")
    .selectAll("div")
    .data([1,2,3,4])
    .enter()

    
    d3.select("body").selectAll("div")
    .append("div")
    
    function updateData() {
      
    var data = d3.range(Math.floor(Math.random()*100))
      
    var divs = d3.select("body").selectAll("div")
      .data(data)
    
    divs
      .enter()
      .append("div")
      .attr("width",20)
      .attr("height",20)
      .text(" ")

      divs
      .transition()
      .duration(200)
      .delay(function(d,i) {return i*20;})
      .transition()
      .duration(300)
      .delay(300)
      .style("height",function(d) {return (4*d/10) +"px"})
      .style("width",function(d) {return (Math.random()*70) +"px"})
      .attr("class",".one")
      
      divs.exit().transition()
        .style("width","4px")
        .attr("class","new")
        .duration(300)
        .delay(function(d,i) {return i*5;})
        .remove()
    }
        
    
    var inter = setInterval(function() {
                updateData();
        }, 1500); 
    
    inter
     
     
     
  </script>
    
  
</html>
